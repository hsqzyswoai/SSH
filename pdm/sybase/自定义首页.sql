/*PORTAL版式表*/
USE cattjb
go
CREATE TABLE dbo.T_SYS_PORTAL
(
    ILAYOUT_ID    numeric(15,0) NULL,
    SLAYOUT_TITLE varchar(50)   NULL,
    ITYPE         numeric(15,0) NULL,
    ILEFTWIDTH    varchar(10)   NULL,
    ICENTERWIDTH  varchar(10)   NULL,
    IRIGHTWIDTH   varchar(10)   NULL
)
LOCK DATAROWS
go
IF OBJECT_ID('dbo.T_SYS_PORTAL') IS NOT NULL
    PRINT '<<< CREATED TABLE dbo.T_SYS_PORTAL >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE dbo.T_SYS_PORTAL >>>'
go

/*PORTAL内容信息表*/
USE cattjb
go
CREATE TABLE dbo.T_SYS_PORTAL_CONTENT
(
    ICONTENT_ID numeric(15,0) NULL,
    STITLE      varchar(50)   NULL,
    SURL        varchar(200)  NULL,
    ISORT       numeric(15,0) NULL,
    ISVALID     numeric(15,0) DEFAULT 0         NULL,
    ICREATOR    numeric(15,0) NULL,
    DUPDATE     varchar(50)  NULL,
    CONTENTTYPE numeric(15,0) NULL
)
LOCK DATAROWS
go
IF OBJECT_ID('dbo.T_SYS_PORTAL_CONTENT') IS NOT NULL
    PRINT '<<< CREATED TABLE dbo.T_SYS_PORTAL_CONTENT >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE dbo.T_SYS_PORTAL_CONTENT >>>'
go

/*PORTAL定制信息表*/
USE cattjb
go
CREATE TABLE dbo.T_SYS_PORTAL_ITEM
(
    IPORTAL_ID  numeric(15,0) NULL,
    STITLE      varchar(50)   NULL,
    ICONTENT_ID numeric(15,0) NULL,
    ISCOLLAPSE  numeric(15,0) DEFAULT 0         NULL,
    ISCLOSE     numeric(15,0) DEFAULT 0         NULL,
    ISVALID     numeric(15,0) DEFAULT 0         NULL,
    ISORT       numeric(15,0) NULL,
    IROW        numeric(15,0) NULL,
    ICOL        numeric(15,0) NULL,
    IUSER_ID    numeric(15,0) NULL,
    DUPDATE     varchar(50) NULL
)
LOCK DATAROWS
go
IF OBJECT_ID('dbo.T_SYS_PORTAL_ITEM') IS NOT NULL
    PRINT '<<< CREATED TABLE dbo.T_SYS_PORTAL_ITEM >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE dbo.T_SYS_PORTAL_ITEM >>>'
go

/*版式和用户关系表*/
USE cattjb
go
CREATE TABLE dbo.T_SYS_PORTL_LAYOUT_USER
(
    ILAYOUT_ID numeric(15,0) NULL,
    IUSER_ID   numeric(15,0) NULL
)
LOCK DATAROWS
go
IF OBJECT_ID('dbo.T_SYS_PORTL_LAYOUT_USER') IS NOT NULL
    PRINT '<<< CREATED TABLE dbo.T_SYS_PORTL_LAYOUT_USER >>>'
ELSE
    PRINT '<<< FAILED CREATING TABLE dbo.T_SYS_PORTL_LAYOUT_USER >>>'
go

/*索引*/
USE cattjb
go
CREATE NONCLUSTERED INDEX idx_iLayoutId
    ON dbo.T_SYS_PORTAL(ILAYOUT_ID)
go
IF EXISTS (SELECT * FROM sysindexes WHERE id=OBJECT_ID('dbo.T_SYS_PORTAL') AND name='idx_iLayoutId')
    PRINT '<<< CREATED INDEX dbo.T_SYS_PORTAL.idx_iLayoutId >>>'
ELSE
    PRINT '<<< FAILED CREATING INDEX dbo.T_SYS_PORTAL.idx_iLayoutId >>>'
go

USE cattjb
go
CREATE NONCLUSTERED INDEX idx_iType
    ON dbo.T_SYS_PORTAL(ITYPE)
go
IF EXISTS (SELECT * FROM sysindexes WHERE id=OBJECT_ID('dbo.T_SYS_PORTAL') AND name='idx_iType')
    PRINT '<<< CREATED INDEX dbo.T_SYS_PORTAL.idx_iType >>>'
ELSE
    PRINT '<<< FAILED CREATING INDEX dbo.T_SYS_PORTAL.idx_iType >>>'
go

USE cattjb
go
CREATE NONCLUSTERED INDEX idx_iContentId
    ON dbo.T_SYS_PORTAL_CONTENT(ICONTENT_ID)
go
IF EXISTS (SELECT * FROM sysindexes WHERE id=OBJECT_ID('dbo.T_SYS_PORTAL_CONTENT') AND name='idx_iContentId')
    PRINT '<<< CREATED INDEX dbo.T_SYS_PORTAL_CONTENT.idx_iContentId >>>'
ELSE
    PRINT '<<< FAILED CREATING INDEX dbo.T_SYS_PORTAL_CONTENT.idx_iContentId >>>'
go

USE cattjb
go
CREATE NONCLUSTERED INDEX idx_iPortalId
    ON dbo.T_SYS_PORTAL_ITEM(IPORTAL_ID)
go
IF EXISTS (SELECT * FROM sysindexes WHERE id=OBJECT_ID('dbo.T_SYS_PORTAL_ITEM') AND name='idx_iPortalId')
    PRINT '<<< CREATED INDEX dbo.T_SYS_PORTAL_ITEM.idx_iPortalId >>>'
ELSE
    PRINT '<<< FAILED CREATING INDEX dbo.T_SYS_PORTAL_ITEM.idx_iPortalId >>>'
go

USE cattjb
go
CREATE NONCLUSTERED INDEX idx_iUserId
    ON dbo.T_SYS_PORTAL_ITEM(IUSER_ID)
go
IF EXISTS (SELECT * FROM sysindexes WHERE id=OBJECT_ID('dbo.T_SYS_PORTAL_ITEM') AND name='idx_iUserId')
    PRINT '<<< CREATED INDEX dbo.T_SYS_PORTAL_ITEM.idx_iUserId >>>'
ELSE
    PRINT '<<< FAILED CREATING INDEX dbo.T_SYS_PORTAL_ITEM.idx_iUserId >>>'
go


/*基础数据*/
/*T_SYS_PORTAL*/
INSERT INTO dbo.T_SYS_PORTAL ( ILAYOUT_ID, SLAYOUT_TITLE, ITYPE, ILEFTWIDTH, ICENTERWIDTH, IRIGHTWIDTH ) 
		 VALUES ( 1, '左宽', 2, '56', '40', '0' ) 
go
INSERT INTO dbo.T_SYS_PORTAL ( ILAYOUT_ID, SLAYOUT_TITLE, ITYPE, ILEFTWIDTH, ICENTERWIDTH, IRIGHTWIDTH ) 
		 VALUES ( 2, '右宽', 2, '40', '56', '0' ) 
go
INSERT INTO dbo.T_SYS_PORTAL ( ILAYOUT_ID, SLAYOUT_TITLE, ITYPE, ILEFTWIDTH, ICENTERWIDTH, IRIGHTWIDTH ) 
		 VALUES ( 3, '两半分', 2, '48', '48', '0' ) 
go
INSERT INTO dbo.T_SYS_PORTAL ( ILAYOUT_ID, SLAYOUT_TITLE, ITYPE, ILEFTWIDTH, ICENTERWIDTH, IRIGHTWIDTH ) 
		 VALUES ( 4, '三等分', 1, '32', '32', '32' ) 
go


/*T_SYS_PORTAL_CONTENT*/
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 79, 'dddd', 'dddd', 123, 1, 1, '2012-01-16 01:41:26', 0 ) 
go
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 66, '在线用户', 'http://m.weather.com.cn/m/p10/weather1.htm', 4, 0, 1, '2011-12-26 07:10:33', 0 ) 
go
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 67, '预警信息', '/admin/commonModule/myPortal/test.html', 500, 0, 1, '2011-12-26 07:10:56', 0 ) 
go
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 75, '您的待办', 'http://m.weather.com.cn/m/p10/weather1.htm', 1, 0, 1, '2011-12-28 01:51:47', 0 ) 
go
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 76, '公告信息', 'http://m.weather.com.cn/m/p10/weather1.htm', 40, 0, 1, '2011-12-28 01:51:56', 0 ) 
go
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 77, '待办单据', 'http://m.weather.com.cn/m/p10/weather1.htm', 50, 0, 1, '2011-12-28 01:52:08', 0 ) 
go
INSERT INTO dbo.T_SYS_PORTAL_CONTENT ( ICONTENT_ID, STITLE, SURL, ISORT, ISVALID, ICREATOR, DUPDATE, CONTENTTYPE ) 
		 VALUES ( 78, '故障仪表盘', 'http://m.weather.com.cn/m/p10/weather1.htm', 60, 0, 1, '2011-12-28 01:52:17', 0 ) 
go

/*T_SYS_PORTAL_ITEM*/
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 178, '故障仪表盘', 78, 0, 0, 0, 0, 0, 0, 1, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 179, '您的待办', 75, 0, 0, 0, 0, 1, 0, 1, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 174, '公告信息', 76, 0, 0, 0, 0, 0, 0, 102170, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 180, '待办单据', 77, 0, 0, 0, 0, 2, 0, 1, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 181, '公告信息', 76, 0, 0, 0, 0, 3, 0, 1, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 182, '预警信息', 67, 0, 0, 0, 0, 0, 1, 1, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 183, '在线用户', 66, 0, 0, 0, 0, 1, 1, 1, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 175, '待办单据', 77, 0, 0, 0, 0, 1, 0, 102170, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 176, 'test123的待办', 75, 0, 0, 0, 0, 0, 1, 102170, NULL ) 
go
INSERT INTO dbo.T_SYS_PORTAL_ITEM ( IPORTAL_ID, STITLE, ICONTENT_ID, ISCOLLAPSE, ISCLOSE, ISVALID, ISORT, IROW, ICOL, IUSER_ID, DUPDATE ) 
		 VALUES ( 177, '在线用户', 66, 0, 0, 0, 0, 1, 1, 102170, NULL ) 
go

/*T_SYS_PORTL_LAYOUT_USER*/
INSERT INTO dbo.T_SYS_PORTL_LAYOUT_USER ( ILAYOUT_ID, IUSER_ID ) 
		 VALUES ( 4, 1 ) 
go
INSERT INTO dbo.T_SYS_PORTL_LAYOUT_USER ( ILAYOUT_ID, IUSER_ID ) 
		 VALUES ( 2, 102170 ) 
go